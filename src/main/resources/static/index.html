<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>试一下socket</title>
  </head>
  <body>
    <h2>hello world</h2>
    <p id="message"></p>

    <script src="js/lib/socket.io.js"></script>
    <script type="text/javascript">
      let socket = io("http://localhost:8881")

      let data = {
        params: {
          a: 123,
          b: "789"
        }
      }

      socket.on("registCallback", (data, callback) => {
        console.log(data);
        callback()
      })

      socket.on("commandEcho", (data, callback) => {
        console.log(data);
        callback()
      })

      window.regist = () => {
        socket.emit("regist", data, (res) => {
          console.log(res)
        })
      }

      //将消息显示在网页上
      function setMessageInnerHTML(innerHTML){
          document.getElementById('message').innerHTML += innerHTML + '<br/>';
      }
    </script>
  </body>
</html>
